<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ ‚Äî ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏™‡∏á‡∏Ü‡πå</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700;800;900&family=Noto+Serif+Thai:wght@400;600;700;900&family=Sarabun:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --saffron: #E8920B;
  --saffron-light: #F5B731;
  --saffron-glow: #FDE7A9;
  --maroon: #6B1D1D;
  --maroon-deep: #4A1010;
  --cream: #FFF8EC;
  --cream-warm: #FFF3DB;
  --gold: #C9A84C;
  --green: #27AE60;
  --green-light: #D5F5E3;
  --red: #C0392B;
  --red-light: #FDEDEC;
  --blue: #2C6E8A;
  --bg: #FAF4E8;
  --text: #3B2E1A;
  --text-muted: #7A6B55;
  --shadow: rgba(107, 29, 29, 0.08);
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }

body {
  font-family: 'Sarabun', 'Noto Sans Thai', sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.8;
  font-size: 17px;
  min-height: 100vh;
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0L60 30L30 60L0 30z' fill='none' stroke='%23C9A84C' stroke-width='0.3' opacity='0.06'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 0;
}

.container {
  position: relative;
  z-index: 1;
  max-width: 720px;
  margin: 0 auto;
  padding: 1.5rem;
}

/* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
.quiz-header {
  text-align: center;
  padding: 2.5rem 1.5rem;
  background: linear-gradient(170deg, var(--maroon-deep) 0%, var(--maroon) 60%, #8B3A1D 100%);
  border-radius: 0 0 24px 24px;
  margin: -1.5rem -1.5rem 2rem;
  position: relative;
  overflow: hidden;
}

.quiz-header::before {
  content: '';
  position: absolute;
  inset: 0;
  background: url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='100' r='80' fill='none' stroke='%23C9A84C' stroke-width='0.5' opacity='0.1'/%3E%3C/svg%3E");
  animation: drift 20s linear infinite;
}

@keyframes drift {
  0% { transform: translateY(0); }
  100% { transform: translateY(-200px); }
}

.header-icon { font-size: 2.5rem; position: relative; z-index: 1; }
.header-title {
  font-family: 'Noto Serif Thai', serif;
  font-size: clamp(1.5rem, 4vw, 2rem);
  font-weight: 900;
  color: #FFF;
  position: relative;
  z-index: 1;
  margin-top: 0.5rem;
}
.header-sub {
  color: var(--saffron-glow);
  font-size: 0.95rem;
  position: relative;
  z-index: 1;
  margin-top: 0.3rem;
  opacity: 0.8;
}

.quiz-back-link {
  position: absolute;
  top: 1rem;
  left: 1rem;
  z-index: 2;
  color: var(--saffron-glow);
  text-decoration: none;
  font-size: 0.9rem;
  font-weight: 700;
  padding: 0.5rem 0.8rem;
  border-radius: 8px;
  background: rgba(0, 0, 0, 0.2);
  transition: background 0.2s, color 0.2s;
}
.quiz-back-link:hover { color: #FFF; background: rgba(0, 0, 0, 0.35); }

/* ‚îÄ‚îÄ Steps indicator ‚îÄ‚îÄ */
.steps {
  display: flex;
  justify-content: center;
  gap: 0.4rem;
  margin-bottom: 2rem;
}
.step-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #DDD;
  transition: all 0.4s;
}
.step-dot.active { background: var(--saffron); transform: scale(1.3); }
.step-dot.done { background: var(--green); }

/* ‚îÄ‚îÄ Screens ‚îÄ‚îÄ */
.screen { display: none; animation: fadeIn 0.4s ease; }
.screen.active { display: block; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ‚îÄ‚îÄ Registration Form ‚îÄ‚îÄ */
.form-card {
  background: #FFF;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 4px 24px var(--shadow);
}

.form-title {
  font-family: 'Noto Serif Thai', serif;
  font-size: 1.3rem;
  font-weight: 900;
  color: var(--maroon);
  margin-bottom: 1.2rem;
  display: flex;
  align-items: center;
  gap: 0.6rem;
}

.field-group { margin-bottom: 1.2rem; }

.field-label {
  display: block;
  font-weight: 700;
  font-size: 0.9rem;
  color: var(--text-muted);
  margin-bottom: 0.4rem;
}

.field-input, .field-select {
  width: 100%;
  padding: 0.8rem 1rem;
  border: 2px solid #E8DCC8;
  border-radius: 10px;
  font-family: inherit;
  font-size: 1rem;
  color: var(--text);
  background: var(--cream);
  transition: border-color 0.3s;
  outline: none;
}

.field-input:focus, .field-select:focus {
  border-color: var(--saffron);
  background: #FFF;
}

.field-input::placeholder { color: #BBA88A; }

.field-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

/* ‚îÄ‚îÄ Buttons ‚îÄ‚îÄ */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.9rem 2rem;
  border: none;
  border-radius: 12px;
  font-family: inherit;
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s;
  text-decoration: none;
}

.btn-primary {
  background: linear-gradient(135deg, var(--saffron), var(--saffron-light));
  color: #FFF;
  box-shadow: 0 4px 16px rgba(232, 146, 11, 0.3);
  width: 100%;
}
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 24px rgba(232, 146, 11, 0.4); }
.btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

.btn-outline {
  background: transparent;
  color: var(--maroon);
  border: 2px solid var(--maroon);
}
.btn-outline:hover { background: var(--maroon); color: #FFF; }

/* ‚îÄ‚îÄ Question Card ‚îÄ‚îÄ */
.q-card {
  background: #FFF;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 4px 24px var(--shadow);
  margin-bottom: 1rem;
}

.q-number {
  display: inline-block;
  background: var(--maroon);
  color: var(--saffron-glow);
  font-family: 'Noto Serif Thai', serif;
  font-size: 0.8rem;
  font-weight: 700;
  padding: 0.2rem 0.8rem;
  border-radius: 15px;
  margin-bottom: 0.8rem;
}

.q-text {
  font-family: 'Noto Serif Thai', serif;
  font-size: 1.15rem;
  font-weight: 700;
  color: var(--maroon-deep);
  margin-bottom: 1.2rem;
  line-height: 1.6;
}

.options { display: flex; flex-direction: column; gap: 0.6rem; }

.option-btn {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  padding: 1rem 1.2rem;
  border: 2px solid #E8DCC8;
  border-radius: 12px;
  background: var(--cream);
  cursor: pointer;
  transition: all 0.25s;
  text-align: left;
  font-family: inherit;
  font-size: 0.95rem;
  color: var(--text);
  width: 100%;
}

.option-btn:hover {
  border-color: var(--saffron);
  background: var(--saffron-glow);
  transform: translateX(4px);
}

.option-btn.selected {
  border-color: var(--saffron);
  background: var(--saffron-glow);
  font-weight: 700;
}

.option-btn.correct {
  border-color: var(--green);
  background: var(--green-light);
  color: #1E8449;
}

.option-btn.wrong {
  border-color: var(--red);
  background: var(--red-light);
  color: var(--red);
}

.option-btn.disabled { pointer-events: none; opacity: 0.7; }
.option-btn.disabled.correct { opacity: 1; }

.option-letter {
  flex-shrink: 0;
  width: 32px;
  height: 32px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
  background: rgba(0,0,0,0.06);
  transition: all 0.25s;
}

.option-btn.selected .option-letter { background: var(--saffron); color: #FFF; }
.option-btn.correct .option-letter { background: var(--green); color: #FFF; }
.option-btn.wrong .option-letter { background: var(--red); color: #FFF; }

/* ‚îÄ‚îÄ Explanation ‚îÄ‚îÄ */
.explanation {
  margin-top: 1rem;
  padding: 1rem;
  border-radius: 10px;
  font-size: 0.9rem;
  line-height: 1.7;
  display: none;
}
.explanation.show { display: block; animation: fadeIn 0.3s ease; }
.explanation.correct-exp { background: var(--green-light); color: #1E8449; border-left: 4px solid var(--green); }
.explanation.wrong-exp { background: var(--red-light); color: var(--red); border-left: 4px solid var(--red); }

/* ‚îÄ‚îÄ Navigation ‚îÄ‚îÄ */
.q-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 1.5rem;
}

.q-counter {
  font-size: 0.85rem;
  color: var(--text-muted);
  font-weight: 600;
}

/* ‚îÄ‚îÄ Results ‚îÄ‚îÄ */
.result-card {
  background: #FFF;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 4px 24px var(--shadow);
  text-align: center;
}

.result-banner {
  padding: 2.5rem 1.5rem;
  color: #FFF;
  position: relative;
}

.result-banner.perfect { background: linear-gradient(135deg, #1E8449, #27AE60); }
.result-banner.great { background: linear-gradient(135deg, var(--saffron), var(--saffron-light)); }
.result-banner.ok { background: linear-gradient(135deg, var(--blue), #3498DB); }
.result-banner.low { background: linear-gradient(135deg, var(--red), #E74C3C); }

.result-emoji { font-size: 3.5rem; margin-bottom: 0.5rem; }

.result-score {
  font-family: 'Noto Serif Thai', serif;
  font-size: 3rem;
  font-weight: 900;
}

.result-label {
  font-size: 1.1rem;
  opacity: 0.9;
  margin-top: 0.3rem;
}

.result-body { padding: 2rem; }

.result-name {
  font-family: 'Noto Serif Thai', serif;
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--maroon);
  margin-bottom: 0.5rem;
}

.result-msg {
  font-size: 0.95rem;
  color: var(--text-muted);
  margin-bottom: 1.5rem;
  line-height: 1.7;
}

.result-detail {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.detail-box {
  background: var(--cream);
  padding: 0.8rem;
  border-radius: 10px;
}

.detail-num {
  font-family: 'Noto Serif Thai', serif;
  font-size: 1.5rem;
  font-weight: 900;
}
.detail-num.green { color: var(--green); }
.detail-num.red { color: var(--red); }
.detail-num.blue { color: var(--blue); }

.detail-label { font-size: 0.78rem; color: var(--text-muted); }

/* ‚îÄ‚îÄ Leaderboard ‚îÄ‚îÄ */
.lb-card {
  background: #FFF;
  border-radius: 16px;
  box-shadow: 0 4px 24px var(--shadow);
  margin-top: 1.5rem;
  overflow: hidden;
}

.lb-header {
  background: linear-gradient(135deg, var(--maroon-deep), var(--maroon));
  padding: 1.2rem 1.5rem;
  color: #FFF;
  display: flex;
  align-items: center;
  gap: 0.6rem;
}

.lb-title {
  font-family: 'Noto Serif Thai', serif;
  font-weight: 900;
  font-size: 1.1rem;
}

.lb-body { padding: 0; }

.lb-row {
  display: grid;
  grid-template-columns: 48px 1fr auto;
  align-items: center;
  padding: 0.8rem 1.2rem;
  border-bottom: 1px solid #F0E8D8;
  transition: background 0.2s;
}

.lb-row:last-child { border-bottom: none; }
.lb-row:hover { background: var(--cream); }
.lb-row.highlight { background: var(--saffron-glow); }

.lb-rank {
  font-family: 'Noto Serif Thai', serif;
  font-weight: 900;
  font-size: 1.1rem;
  color: var(--text-muted);
  text-align: center;
}

.lb-row:nth-child(1) .lb-rank { color: #D4AF37; font-size: 1.3rem; }
.lb-row:nth-child(2) .lb-rank { color: #95A5A6; font-size: 1.2rem; }
.lb-row:nth-child(3) .lb-rank { color: #CD7F32; font-size: 1.15rem; }

.lb-name {
  font-weight: 600;
  font-size: 0.95rem;
}

.lb-age {
  font-size: 0.78rem;
  color: var(--text-muted);
}

.lb-score {
  font-family: 'Noto Serif Thai', serif;
  font-weight: 900;
  font-size: 1.1rem;
  color: var(--green);
}

.lb-empty {
  padding: 2rem;
  text-align: center;
  color: var(--text-muted);
  font-size: 0.9rem;
}

/* ‚îÄ‚îÄ Loading ‚îÄ‚îÄ */
.spinner {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 3px solid rgba(255,255,255,0.3);
  border-top-color: #FFF;
  border-radius: 50%;
  animation: spin 0.7s linear infinite;
}

@keyframes spin { to { transform: rotate(360deg); } }

/* ‚îÄ‚îÄ Actions ‚îÄ‚îÄ */
.actions {
  display: flex;
  gap: 1rem;
  margin-top: 1.5rem;
}
.actions .btn { flex: 1; }

/* ‚îÄ‚îÄ Toast ‚îÄ‚îÄ */
.toast {
  position: fixed;
  bottom: 2rem;
  left: 50%;
  transform: translateX(-50%) translateY(100px);
  background: var(--maroon);
  color: #FFF;
  padding: 0.8rem 1.5rem;
  border-radius: 10px;
  font-size: 0.9rem;
  z-index: 1000;
  transition: transform 0.4s;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
}
.toast.show { transform: translateX(-50%) translateY(0); }

/* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
@media (max-width: 500px) {
  .container { padding: 1rem; }
  .q-card, .form-card { padding: 1.3rem; }
  .field-row { grid-template-columns: 1fr; }
  .result-detail { grid-template-columns: 1fr 1fr 1fr; gap: 0.6rem; }
  .actions { flex-direction: column; }
}
</style>
</head>
<body>

<div class="container">

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Header ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="quiz-header">
    <a href="menu.html" class="quiz-back-link">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π</a>
    <div class="header-icon">üìù</div>
    <div class="header-title">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ</div>
    <div class="header-sub">‡πÇ‡∏£‡∏Ñ‡∏´‡∏±‡∏î ‡∏´‡∏±‡∏î‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏±‡∏ô ‡∏≠‡∏µ‡∏™‡∏∏‡∏Å‡∏≠‡∏µ‡πÉ‡∏™ ‡πÅ‡∏•‡∏∞‡πÑ‡∏Ç‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏≠‡∏≠‡∏Å ‚Äî ‡πï ‡∏Ç‡πâ‡∏≠</div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Steps ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="steps" id="steps">
    <div class="step-dot active" data-step="reg"></div>
    <div class="step-dot" data-step="q1"></div>
    <div class="step-dot" data-step="q2"></div>
    <div class="step-dot" data-step="q3"></div>
    <div class="step-dot" data-step="q4"></div>
    <div class="step-dot" data-step="q5"></div>
    <div class="step-dot" data-step="result"></div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Screen: Registration ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="screen active" id="screen-reg">
    <div class="form-card">
      <div class="form-title">üôè ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</div>

      <div class="field-group">
        <label class="field-label">‡∏ä‡∏∑‡πà‡∏≠ (‡∏û‡∏£‡∏∞/‡∏™‡∏≤‡∏°‡πÄ‡∏ì‡∏£)</label>
        <input type="text" class="field-input" id="inputName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏£‡∏∞‡∏°‡∏´‡∏≤‡∏™‡∏°‡∏ä‡∏≤‡∏¢ / ‡∏™‡∏≤‡∏°‡πÄ‡∏ì‡∏£‡∏™‡∏°‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå" autocomplete="off">
      </div>

      <div class="field-row">
        <div class="field-group">
          <label class="field-label">‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏õ‡∏µ)</label>
          <input type="number" class="field-input" id="inputAge" placeholder="‡πÄ‡∏ä‡πà‡∏ô 25" min="5" max="120">
        </div>
        <div class="field-group">
          <label class="field-label">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
          <select class="field-select" id="inputStatus">
            <option value="‡∏û‡∏£‡∏∞‡∏†‡∏¥‡∏Å‡∏©‡∏∏">‡∏û‡∏£‡∏∞‡∏†‡∏¥‡∏Å‡∏©‡∏∏</option>
            <option value="‡∏™‡∏≤‡∏°‡πÄ‡∏ì‡∏£">‡∏™‡∏≤‡∏°‡πÄ‡∏ì‡∏£</option>
            <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô ‡πÜ</option>
          </select>
        </div>
      </div>

      <button class="btn btn-primary" id="btnStart" onclick="startQuiz()">
        ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‚ûú
      </button>
    </div>

    <!-- Leaderboard Preview -->
    <div class="lb-card" id="lbPreview">
      <div class="lb-header">
        <span>üèÜ</span>
        <span class="lb-title">‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</span>
      </div>
      <div class="lb-body" id="lbPreviewBody">
        <div class="lb-empty">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Screen: Questions (generated by JS) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="screen" id="screen-quiz"></div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Screen: Result ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="screen" id="screen-result"></div>

</div>

<div class="toast" id="toast"></div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ‚ö†Ô∏è ‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á Google Apps Script ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzbZcemFYQGoO5YC9STJh4Ev0Jm2Z6KigmBZ3L_M_jBoL0aP17xF87dGPmYleg5DT4/exec";
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const QUESTIONS = [
  {
    q: "‡πÇ‡∏£‡∏Ñ‡∏´‡∏±‡∏î‡πÅ‡∏ó‡πâ (Measles) ‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤ \"3C\" ‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡∏Å‡∏•‡πà‡∏≤‡∏ß‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?",
    options: [
      "Cough (‡πÑ‡∏≠), Cold (‡∏´‡∏ß‡∏±‡∏î), Convulsion (‡∏ä‡∏±‡∏Å)",
      "Cough (‡πÑ‡∏≠), Coryza (‡∏ô‡πâ‡∏≥‡∏°‡∏π‡∏Å‡πÑ‡∏´‡∏•), Conjunctivitis (‡∏ï‡∏≤‡πÅ‡∏î‡∏á)",
      "Chill (‡∏´‡∏ô‡∏≤‡∏ß‡∏™‡∏±‡πà‡∏ô), Cough (‡πÑ‡∏≠), Constipation (‡∏ó‡πâ‡∏≠‡∏á‡∏ú‡∏π‡∏Å)",
      "Coryza (‡∏ô‡πâ‡∏≥‡∏°‡∏π‡∏Å), Chill (‡∏´‡∏ô‡∏≤‡∏ß‡∏™‡∏±‡πà‡∏ô), Confusion (‡∏™‡∏±‡∏ö‡∏™‡∏ô)"
    ],
    answer: 1,
    explain: "‡∏≠‡∏≤‡∏Å‡∏≤‡∏£ 3C ‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏Ñ‡∏´‡∏±‡∏î ‡∏Ñ‡∏∑‡∏≠ Cough (‡πÑ‡∏≠), Coryza (‡∏ô‡πâ‡∏≥‡∏°‡∏π‡∏Å‡πÑ‡∏´‡∏•) ‡πÅ‡∏•‡∏∞ Conjunctivitis (‡∏ï‡∏≤‡πÅ‡∏î‡∏á) ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô 3 ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£ ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡πÑ‡∏Ç‡πâ‡∏™‡∏π‡∏á‡∏•‡∏≠‡∏¢"
  },
  {
    q: "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡πÑ‡∏Ç‡πâ‡∏™‡∏π‡∏á ‡∏¢‡∏≤‡∏ä‡∏ô‡∏¥‡∏î‡πÉ‡∏î‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î‡πÉ‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÑ‡∏Ç‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏≠‡∏µ‡∏™‡∏∏‡∏Å‡∏≠‡∏µ‡πÉ‡∏™?",
    options: [
      "‡∏û‡∏≤‡∏£‡∏≤‡πÄ‡∏ã‡∏ï‡∏≤‡∏°‡∏≠‡∏• (Paracetamol)",
      "‡∏¢‡∏≤‡πÅ‡∏Å‡πâ‡πÅ‡∏û‡πâ (Antihistamine)",
      "‡πÅ‡∏≠‡∏™‡πÑ‡∏û‡∏£‡∏¥‡∏ô (Aspirin) ‡πÅ‡∏•‡∏∞ ‡πÑ‡∏≠‡∏ö‡∏π‡πÇ‡∏û‡∏£‡πÄ‡∏ü‡∏ô (NSAIDs)",
      "‡∏¢‡∏≤‡∏õ‡∏è‡∏¥‡∏ä‡∏µ‡∏ß‡∏ô‡∏∞ (Antibiotics)"
    ],
    answer: 2,
    explain: "‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡πÅ‡∏≠‡∏™‡πÑ‡∏û‡∏£‡∏¥‡∏ô‡πÅ‡∏•‡∏∞ NSAIDs (‡πÄ‡∏ä‡πà‡∏ô ‡πÑ‡∏≠‡∏ö‡∏π‡πÇ‡∏û‡∏£‡πÄ‡∏ü‡∏ô) ‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÉ‡∏ô‡∏≠‡∏µ‡∏™‡∏∏‡∏Å‡∏≠‡∏µ‡πÉ‡∏™/‡∏´‡∏±‡∏î‡∏≠‡∏≤‡∏à‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¢‡πå (‡∏ï‡∏±‡∏ö‡∏ß‡∏≤‡∏¢+‡∏™‡∏°‡∏≠‡∏á‡∏ö‡∏ß‡∏°) ‡πÅ‡∏•‡∏∞‡πÉ‡∏ô‡πÑ‡∏Ç‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏≠‡∏≠‡∏Å‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏≠‡∏≠‡∏Å‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏û‡∏≤‡∏£‡∏≤‡πÄ‡∏ã‡∏ï‡∏≤‡∏°‡∏≠‡∏•‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô"
  },
  {
    q: "‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏Ç‡∏≠‡∏á‡πÑ‡∏Ç‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏≠‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡∏ö‡πÑ‡∏õ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ?",
    options: [
      "‡∏°‡∏µ‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏î‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢",
      "‡∏õ‡∏ß‡∏î‡∏ó‡πâ‡∏≠‡∏á‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡πÉ‡∏ï‡πâ‡∏ä‡∏≤‡∏¢‡πÇ‡∏Ñ‡∏£‡∏á‡∏Ç‡∏ß‡∏≤, ‡∏≠‡∏≤‡πÄ‡∏à‡∏µ‡∏¢‡∏ô‡πÑ‡∏°‡πà‡∏´‡∏¢‡∏∏‡∏î, ‡∏°‡∏∑‡∏≠‡πÄ‡∏ó‡πâ‡∏≤‡πÄ‡∏¢‡πá‡∏ô",
      "‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏°‡∏π‡∏Å‡πÉ‡∏™‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢",
      "‡∏ú‡∏∑‡πà‡∏ô‡∏à‡∏≤‡∏á‡∏•‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 3 ‡∏ß‡∏±‡∏ô"
    ],
    answer: 1,
    explain: "‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡πÑ‡∏Ç‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏≠‡∏≠‡∏Å ‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πà ‡∏õ‡∏ß‡∏î‡∏ó‡πâ‡∏≠‡∏á‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á (‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ï‡πâ‡∏ä‡∏≤‡∏¢‡πÇ‡∏Ñ‡∏£‡∏á‡∏Ç‡∏ß‡∏≤), ‡∏≠‡∏≤‡πÄ‡∏à‡∏µ‡∏¢‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á, ‡∏°‡∏∑‡∏≠‡πÄ‡∏ó‡πâ‡∏≤‡πÄ‡∏¢‡πá‡∏ô, ‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏≠‡∏≠‡∏Å‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥, ‡∏õ‡∏±‡∏™‡∏™‡∏≤‡∏ß‡∏∞‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å > 6 ‡∏ä‡∏°. ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ä‡πà‡∏ß‡∏á‡πÑ‡∏Ç‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏î‡∏•‡∏á (‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 3-7) ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡∏ö‡πÑ‡∏õ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ"
  },
  {
    q: "‡∏´‡∏•‡∏±‡∏Å \"‡∏â‡∏µ‡∏î-‡∏´‡πà‡∏≤‡∏á-‡∏õ‡∏¥‡∏î-‡πÄ‡∏õ‡∏¥‡∏î\" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ ‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ \"‡∏õ‡∏¥‡∏î\" ‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á?",
    options: [
      "‡∏õ‡∏¥‡∏î‡∏ù‡∏≤‡∏†‡∏≤‡∏ä‡∏ô‡∏∞‡∏Ç‡∏±‡∏á‡∏ô‡πâ‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô‡∏¢‡∏∏‡∏á",
      "‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏•‡∏°‡πÄ‡∏Ç‡πâ‡∏≤",
      "‡∏™‡∏ß‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å‡∏≠‡∏ô‡∏≤‡∏°‡∏±‡∏¢‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏î‡∏î‡∏°‡πÄ‡∏ä‡∏∑‡πâ‡∏≠",
      "‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏ô‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏ö‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠"
    ],
    answer: 2,
    explain: "‡πÉ‡∏ô‡∏Ñ‡∏≤‡∏ñ‡∏≤ \"‡∏â‡∏µ‡∏î-‡∏´‡πà‡∏≤‡∏á-‡∏õ‡∏¥‡∏î-‡πÄ‡∏õ‡∏¥‡∏î\" ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ \"‡∏õ‡∏¥‡∏î\" ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á ‡∏õ‡∏¥‡∏î(‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å) = ‡∏™‡∏ß‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å‡∏≠‡∏ô‡∏≤‡∏°‡∏±‡∏¢ ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ä‡∏ô‡∏¥‡∏î N95 ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏π‡πÅ‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏î‡∏î‡∏°‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏•‡∏≠‡∏¢‡πÉ‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏®"
  },
  {
    q: "‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏≠‡∏µ‡∏™‡∏∏‡∏Å‡∏≠‡∏µ‡πÉ‡∏™‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏¢‡∏Å‡∏Å‡∏∏‡∏è‡∏¥‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÉ‡∏î ‡∏à‡∏∂‡∏á‡∏à‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢?",
    options: [
      "‡∏Ñ‡∏£‡∏ö 4 ‡∏ß‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ú‡∏∑‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô",
      "‡∏Ñ‡∏£‡∏ö 7 ‡∏ß‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ú‡∏∑‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô",
      "‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡∏∏‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏ó‡∏∏‡∏Å‡∏ï‡∏∏‡πà‡∏°‡∏à‡∏∞‡∏ï‡∏Å‡∏™‡∏∞‡πÄ‡∏Å‡πá‡∏î‡πÅ‡∏•‡∏∞‡πÅ‡∏´‡πâ‡∏á‡∏´‡∏°‡∏î",
      "‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡πÑ‡∏Ç‡πâ‡∏à‡∏∞‡∏•‡∏î‡∏•‡∏á‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 37.5¬∞C"
    ],
    answer: 2,
    explain: "‡∏≠‡∏µ‡∏™‡∏∏‡∏Å‡∏≠‡∏µ‡πÉ‡∏™‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡∏ì‡∏ë‡πå \"‡∏î‡∏π‡∏≠‡∏≤‡∏Å‡∏≤‡∏£\" ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ô‡∏±‡∏ö‡∏ß‡∏±‡∏ô ‚Äî ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡∏∏‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏à‡∏∞‡∏ï‡∏Å‡∏™‡∏∞‡πÄ‡∏Å‡πá‡∏î‡πÅ‡∏•‡∏∞‡πÅ‡∏´‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏°‡∏±‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 5-7 ‡∏ß‡∏±‡∏ô) ‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏´‡∏±‡∏î‡πÅ‡∏ó‡πâ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡∏ì‡∏ë‡πå \"‡∏ô‡∏±‡∏ö‡∏ß‡∏±‡∏ô\" (‚â• 4 ‡∏ß‡∏±‡∏ô)"
  }
];

let currentQ = 0;
let score = 0;
let answers = [];
let userName = "";
let userAge = "";

// ‚îÄ‚îÄ Load leaderboard on start ‚îÄ‚îÄ
window.addEventListener('DOMContentLoaded', () => {
  loadLeaderboard('lbPreviewBody');
});

function loadLeaderboard(containerId) {
  if (APPS_SCRIPT_URL === "YOUR_APPS_SCRIPT_URL_HERE") {
    document.getElementById(containerId).innerHTML = `
      <div class="lb-empty">‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ APPS_SCRIPT_URL ‡∏Å‡πà‡∏≠‡∏ô<br><span style="font-size:0.8rem;">‡∏î‡∏π‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ô AppScript-Code.gs.txt</span></div>`;
    return;
  }

  fetch(APPS_SCRIPT_URL)
    .then(r => r.json())
    .then(data => {
      if (data.status === "success" && data.leaderboard && data.leaderboard.length > 0) {
        renderLeaderboard(containerId, data.leaderboard);
      } else {
        document.getElementById(containerId).innerHTML = `<div class="lb-empty">ü™∑ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö<br>‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÄ‡∏•‡∏¢!</div>`;
      }
    })
    .catch(() => {
      document.getElementById(containerId).innerHTML = `<div class="lb-empty">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ<br><span style="font-size:0.8rem;">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö URL ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£ Deploy</span></div>`;
    });
}

function renderLeaderboard(containerId, lb, highlightName) {
  const el = document.getElementById(containerId);
  if (!lb || lb.length === 0) {
    el.innerHTML = `<div class="lb-empty">ü™∑ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>`;
    return;
  }

  const medals = ['ü•á', 'ü•à', 'ü•â'];
  el.innerHTML = lb.map((item, i) => {
    const isHighlight = highlightName && item.name === highlightName;
    return `
      <div class="lb-row ${isHighlight ? 'highlight' : ''}">
        <div class="lb-rank">${medals[i] || (i + 1)}</div>
        <div>
          <div class="lb-name">${item.name}</div>
          <div class="lb-age">‡∏≠‡∏≤‡∏¢‡∏∏ ${item.age} ‡∏õ‡∏µ</div>
        </div>
        <div class="lb-score">${item.score}/${item.total}</div>
      </div>`;
  }).join('');
}

// ‚îÄ‚îÄ Start Quiz ‚îÄ‚îÄ
function startQuiz() {
  userName = document.getElementById('inputName').value.trim();
  userAge = document.getElementById('inputAge').value.trim();

  if (!userName) { showToast("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠"); return; }
  if (!userAge || userAge < 5 || userAge > 120) { showToast("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏≤‡∏¢‡∏∏‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"); return; }

  const status = document.getElementById('inputStatus').value;
  if (status !== "‡∏≠‡∏∑‡πà‡∏ô‡πÜ" && !userName.includes(status === "‡∏û‡∏£‡∏∞‡∏†‡∏¥‡∏Å‡∏©‡∏∏" ? "‡∏û‡∏£‡∏∞" : "‡∏™‡∏≤‡∏°‡πÄ‡∏ì‡∏£")) {
    // Don't force prefix, just note it
  }

  currentQ = 0;
  score = 0;
  answers = [];
  renderQuestion();
  showScreen('quiz');
  updateSteps(1);
}

function renderQuestion() {
  const q = QUESTIONS[currentQ];
  const letters = ['‡∏Å', '‡∏Ç', '‡∏Ñ', '‡∏á'];

  document.getElementById('screen-quiz').innerHTML = `
    <div class="q-card">
      <div class="q-number">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${currentQ + 1} ‡∏à‡∏≤‡∏Å ${QUESTIONS.length}</div>
      <div class="q-text">${q.q}</div>
      <div class="options" id="options">
        ${q.options.map((opt, i) => `
          <button class="option-btn" onclick="selectAnswer(${i})" data-idx="${i}">
            <span class="option-letter">${letters[i]}</span>
            <span>${opt}</span>
          </button>
        `).join('')}
      </div>
      <div class="explanation" id="explanation"></div>
    </div>
    <div class="q-nav">
      <span class="q-counter">${currentQ + 1} / ${QUESTIONS.length}</span>
      <button class="btn btn-primary" id="btnNext" style="width:auto;display:none;" onclick="nextQuestion()">
        ${currentQ < QUESTIONS.length - 1 ? '‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ûú' : '‡∏î‡∏π‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‚òÖ'}
      </button>
    </div>`;
}

function selectAnswer(idx) {
  const q = QUESTIONS[currentQ];
  const isCorrect = idx === q.answer;
  
  if (isCorrect) score++;
  answers.push({ q: currentQ + 1, selected: idx, correct: q.answer, isCorrect });

  // Disable all options
  const buttons = document.querySelectorAll('.option-btn');
  buttons.forEach((btn, i) => {
    btn.classList.add('disabled');
    if (i === q.answer) btn.classList.add('correct');
    if (i === idx && !isCorrect) btn.classList.add('wrong');
  });

  // Show explanation
  const expEl = document.getElementById('explanation');
  expEl.className = `explanation show ${isCorrect ? 'correct-exp' : 'wrong-exp'}`;
  expEl.innerHTML = `<strong>${isCorrect ? '‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!' : '‚ùå ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'}</strong><br>${q.explain}`;

  // Show next button
  document.getElementById('btnNext').style.display = 'inline-flex';
}

function nextQuestion() {
  currentQ++;
  if (currentQ < QUESTIONS.length) {
    renderQuestion();
    updateSteps(currentQ + 1);
  } else {
    showResult();
    updateSteps(QUESTIONS.length + 1);
  }
}

function showResult() {
  const total = QUESTIONS.length;
  const percent = Math.round((score / total) * 100);
  
  let bannerClass, emoji, msg;
  if (percent === 100) {
    bannerClass = 'perfect'; emoji = 'üèÜ';
    msg = '‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏ó‡πà‡∏≤‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏™‡∏á‡∏Ü‡πå‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à';
  } else if (percent >= 80) {
    bannerClass = 'great'; emoji = 'üåü';
    msg = '‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‡∏ó‡πà‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÑ‡∏î‡πâ‡∏î‡∏µ ‡∏•‡∏≠‡∏á‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î‡∏≠‡∏µ‡∏Å‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö';
  } else if (percent >= 60) {
    bannerClass = 'ok'; emoji = 'üìñ';
    msg = '‡∏û‡∏≠‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ ‡∏ó‡πà‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á';
  } else {
    bannerClass = 'low'; emoji = 'üôè';
    msg = '‡∏Ñ‡∏ß‡∏£‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÇ‡∏£‡∏Ñ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ï‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô‡∏°‡∏≤‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö';
  }

  const wrong = total - score;

  document.getElementById('screen-result').innerHTML = `
    <div class="result-card">
      <div class="result-banner ${bannerClass}">
        <div class="result-emoji">${emoji}</div>
        <div class="result-score">${score}/${total}</div>
        <div class="result-label">${percent}% ‚Äî ${bannerClass === 'perfect' ? '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ï‡πá‡∏°!' : bannerClass === 'great' ? '‡∏î‡∏µ‡∏°‡∏≤‡∏Å!' : bannerClass === 'ok' ? '‡∏û‡∏≠‡πÉ‡∏ä‡πâ' : '‡∏Ñ‡∏ß‡∏£‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô'}</div>
      </div>
      <div class="result-body">
        <div class="result-name">üôè ${userName} (‡∏≠‡∏≤‡∏¢‡∏∏ ${userAge} ‡∏õ‡∏µ)</div>
        <div class="result-msg">${msg}</div>
        <div class="result-detail">
          <div class="detail-box">
            <div class="detail-num green">${score}</div>
            <div class="detail-label">‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å</div>
          </div>
          <div class="detail-box">
            <div class="detail-num red">${wrong}</div>
            <div class="detail-label">‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î</div>
          </div>
          <div class="detail-box">
            <div class="detail-num blue">${percent}%</div>
            <div class="detail-label">‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå</div>
          </div>
        </div>
        <div id="saveStatus" style="font-size:0.85rem;color:var(--text-muted);margin-bottom:1rem;">
          <span class="spinner" style="border-color:rgba(0,0,0,0.1);border-top-color:var(--saffron);"></span> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô...
        </div>
      </div>
    </div>

    <div class="lb-card">
      <div class="lb-header">
        <span>üèÜ</span>
        <span class="lb-title">‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</span>
      </div>
      <div class="lb-body" id="lbResultBody">
        <div class="lb-empty"><span class="spinner" style="border-color:rgba(0,0,0,0.1);border-top-color:var(--saffron);"></span> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
      </div>
    </div>

    <div class="actions">
      <button class="btn btn-primary" onclick="retryQuiz()">üîÑ ‡∏ó‡∏≥‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
    </div>
  `;

  showScreen('result');
  submitScore(score, total, percent);
}

function submitScore(sc, total, percent) {
  if (APPS_SCRIPT_URL === "YOUR_APPS_SCRIPT_URL_HERE") {
    document.getElementById('saveStatus').innerHTML = '‚ö†Ô∏è ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ APPS_SCRIPT_URL ‚Äî ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å';
    document.getElementById('lbResultBody').innerHTML = `<div class="lb-empty">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ URL ‡∏Å‡πà‡∏≠‡∏ô</div>`;
    return;
  }

  const answersStr = answers.map(a => `‡∏Ç‡πâ‡∏≠${a.q}:${a.isCorrect ? '‚úì' : '‚úó'}`).join(', ');

  fetch(APPS_SCRIPT_URL, {
    method: 'POST',
    mode: 'cors',
    headers: { 'Content-Type': 'text/plain; charset=utf-8' },
    body: JSON.stringify({
      name: userName,
      age: userAge,
      score: sc,
      total: total,
      percent: percent,
      answers: answersStr
    })
  })
  .then(r => {
    if (!r.ok) throw new Error('HTTP ' + r.status);
    return r.text();
  })
  .then(text => {
    let data;
    try { data = JSON.parse(text); } catch (e) { throw new Error('‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà JSON'); }
    if (data.status === 'success') {
      document.getElementById('saveStatus').innerHTML = '‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß';
      if (data.leaderboard) {
        renderLeaderboard('lbResultBody', data.leaderboard, userName);
      }
    } else {
      document.getElementById('saveStatus').innerHTML = '‚ùå ' + (data.message || '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
    }
  })
  .catch(err => {
    const msg = err.message || '';
    document.getElementById('saveStatus').innerHTML = '‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ ‚Äî ' + (msg || '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ (CORS / Deploy URL)');
    document.getElementById('lbResultBody').innerHTML = '<div class="lb-empty">‡πÄ‡∏õ‡∏¥‡∏î Console (F12) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î error</div>';
    console.error('Quiz submit error:', err);
  });
}

function retryQuiz() {
  showScreen('reg');
  updateSteps(0);
}

// ‚îÄ‚îÄ Utilities ‚îÄ‚îÄ
function showScreen(name) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById('screen-' + name).classList.add('active');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function updateSteps(activeIdx) {
  const dots = document.querySelectorAll('.step-dot');
  dots.forEach((dot, i) => {
    dot.classList.remove('active', 'done');
    if (i < activeIdx) dot.classList.add('done');
    if (i === activeIdx) dot.classList.add('active');
  });
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}
</script>

</body>
</html>